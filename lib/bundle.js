!function(){var e=function(e){var t;return function(i){return t||e(t={exports:{},parent:i},t.exports),t.exports}},t=e(function(e,t){"use strict";var i=/\n[\s]+$/,r=/^\n[\s]+/,s=/[\s]+$/,n=/^[\s]+/,a=/[\n\s]+/g,o=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],l=["code","pre","textarea"];e.exports=function e(t,c){if(Array.isArray(c))for(var h,u,d=t.nodeName.toLowerCase(),f=!1,m=0,g=c.length;m<g;m++){var p=c[m];if(Array.isArray(p))e(t,p);else{("number"==typeof p||"boolean"==typeof p||"function"==typeof p||p instanceof Date||p instanceof RegExp)&&(p=p.toString());var y=t.childNodes[t.childNodes.length-1];if("string"==typeof p)f=!0,y&&"#text"===y.nodeName?y.nodeValue+=p:(p=t.ownerDocument.createTextNode(p),t.appendChild(p),y=p),m===g-1&&(f=!1,-1===o.indexOf(d)&&-1===l.indexOf(d)?""===(h=y.nodeValue.replace(r,"").replace(s,"").replace(i,"").replace(a," "))?t.removeChild(y):y.nodeValue=h:-1===l.indexOf(d)&&(u=0===m?"":" ",h=y.nodeValue.replace(r,u).replace(n," ").replace(s,"").replace(i,"").replace(a," "),y.nodeValue=h));else if(p&&p.nodeType){f&&(f=!1,-1===o.indexOf(d)&&-1===l.indexOf(d)?""===(h=y.nodeValue.replace(r,"").replace(i," ").replace(a," "))?t.removeChild(y):y.nodeValue=h:-1===l.indexOf(d)&&(h=y.nodeValue.replace(n," ").replace(r,"").replace(i," ").replace(a," "),y.nodeValue=h));var b=p.nodeName;b&&(d=b.toLowerCase()),t.appendChild(p)}}}}}),i=e(function(e,t){});let r={bytesToBits:e=>(this._bytes2bits_lookup||(this._bytes2bits_lookup=new Array(256).fill(0).map((e,t)=>("0".repeat(8)+t.toString(2)).slice(-8))),[...new Uint8Array(e)].map(e=>this._bytes2bits_lookup[e]).join("")),bytesToPrefixBits:(e,t=0)=>r.bytesToBits(e.slice(0,Math.ceil(t/8))).slice(0,t),bytesToBase16:e=>Array.from(new Uint8Array(e)).map(e=>`0${e.toString("16")}`.substr(-2)).join("").toLowerCase(),decodeUTF8:e=>(this._utf8_decoder||(this._utf8_decoder=new TextDecoder("utf-8")),this._utf8_decoder.decode(e))};var s=r,n={exports:{}};const a={add:(...e)=>e.reduce((e,t)=>e.map((e,i)=>e+t[i])),multiply:(e,t)=>e.map(e=>e.map((e,i)=>e*t[i])),mean:(...e)=>a.multiply([a.add(...e)],a.build(1/e.length,e[0].length))[0],build:(e,t)=>{let i=[];for(let r=0;r<t;r++)i.push(e);return i},distanceSquared:(e,t)=>{let i=0;for(let r=0;r<e.length;r++){const s=e[r]-t[r];i+=s*s}return i}};n.exports=a,n=n.exports;var o=class extends class{constructor({title:e,keywords:t,tags:i,link:r,media:s,body:n,provider:a,id:o}={}){this.title=e||null,this.keywords=t||[],this.tags=i||[],this.link=r||null,this.media=s||[],this.body=n||null,this.provider=a||null,this.id=o||null}get uri(){return`${this.provider||"unknown"}:${this.id||this.link||"unknown"}`}inspect(){return`<${this.constructor.name} [${uri}]: ${this.title||this.keywords.join(", ")}>`}toJSON(){return{title:this.title,keywords:this.keywords,link:this.link,media:this.media,body:this.body,provider:this.provider,id:this.id}}}{constructor({library:e,tags:t,terms:i,termDiversity:r,hash:s,definitionIndex:n}={}){super(),this.library=e,this.tags=t||[],this.terms=i||[],this.termDiversity=r||0,this._hash=s,this._definitionIndex=n||0,this._fetched=!1}async fetch(){if(!this._fetched){let e=this.parentSearchResult||this,t=await this.library._fetchDefinitionData(this);e.title=t.data.title,e.keywords=t.data.keywords||t.data.glossList,e.link=t.data.link,e.body=t.data.body,e.provider=t.data.provider||t.data.spider,e.id=t.data.id||t.data.link,e.media=t.media.map(e=>Object.keys(e).map(t=>Object.assign(Object.create(this.library.settings.mediaSets.find(e=>e.extension==t)),{url:`${this.library.baseURL}/${e[t]}`}))),e._fetched=!0}return this}},l={exports:{}};(function(e){let t=[(e,i)=>({type:"settings",length:3+e.getUint16(1),data:JSON.parse(t.stringFromPosition(e,3,e.getUint16(1)))}),(e,i)=>({type:"establish vector symbol",length:3+t.vectorByteSize(i),data:{symbolIndex:e.getUint16(1),vector:t.decodeVector(e,i,3),indexBytes:t.sliceSection(e,3,t.vectorByteSize(i))}}),(e,i)=>({type:"establish string symbol",length:4+e.getUint8(3),data:{symbolIndex:e.getUint16(1),string:t.stringFromPosition(e,4,e.getUint8(3)),indexBytes:t.sliceSection(e,4,e.getUint8(3))}}),(e,t)=>({type:"set tag list",length:2+2*e.getUint8(1),data:{symbols:Array(e.getUint8(1)).fill().map((t,i)=>e.getUint16(2+2*i))}}),(e,t)=>({type:"define search result",length:3+2*e.getUint8(1),data:{definitions:e.getUint8(2),symbols:Array(e.getUint8(1)).fill().map((t,i)=>e.getUint16(3+2*i))}})];t.decodeVector=function(e,t,i){let r={sint8:1,sint16:2,float32:4}[t.format],s={sint8:"getInt8",sint16:"getInt16",float32:"getFloat32"}[t.format],n={sint8:127,sint16:32767,float32:1}[t.format],a=[];for(let o=0;o<t.vectorSize;o++)a[o]=e[s].call(e,i+o*r)/n*t.scaling;return a},t.vectorByteSize=function(e){return e.vectorSize*{sint8:1,sint16:2,float32:4}[e.format]},t.sliceSection=function(e,t,i){return new Uint8Array(e.buffer,e.byteOffset+t,i)},t.stringFromPosition=function(e,i,r){return(new TextDecoder).decode(t.sliceSection(e,i,r))},l.exports=class{constructor(){this.isOpen=!1,this.settings={},this._fetch=this._fetchWeb,this._hash=this._hashWeb,"object"==typeof e&&"object"==typeof e.versions&&void 0!==e.versions.node&&(this._fetch=this._fetchNodeJS,this._hash=this._hashNodeJS)}async open(e){this.baseURL=e,this.name=e.split("/").slice(-1)[0],this.searchIndex=[];let i=await this._fetch(`${this.baseURL}/index.bin`);this.mtime=i.mtime;let r=[],s=[],a=[],l={settings:async e=>this.settings=e,"establish vector symbol":async e=>{s[e.symbolIndex]=e.vector,a[e.symbolIndex]=e.indexBytes},"establish string symbol":async e=>{s[e.symbolIndex]=e.string,a[e.symbolIndex]=e.indexBytes},"set tag list":async e=>{r=e.symbols.map(e=>s[e])},"define search result":async e=>{let t=[...r.map(e=>s.indexOf(e)),...e.symbols].map(e=>a[e]),i=e.symbols.map(e=>s[e]),l=i.filter(e=>"string"!=typeof e),c=0;if(l.length>1){let e=n.mean(...l),t=l.map(t=>n.distanceSquared(t,e));c=Math.max(...t)}let h=Uint8Array.from(Array.prototype.concat(...t.map(e=>Array.from(e)))),u=await this._hash(h);for(let s=0;s<e.definitions;s++)this.searchIndex.push(new o({library:this,tags:r,terms:i,termDiversity:c,hash:u,definitionIndex:s}))}},c=0,h=new DataView(i);for(;c<i.byteLength;){let e=h.getUint8(c),r=(0,t[e])(new DataView(i,c),this.settings);await l[r.type](r.data),c+=r.length}return this.isOpen=!0,this}getTags(){let e={};return this.searchIndex.forEach(t=>{t.tags.forEach(t=>e[t]=(e[t]||0)+1)}),e}async lookup(e,t={}){if(3!=this.settings.version)throw new Error("Unsupported version");if("boolean"==typeof t&&(t={sort:t}),!this.isOpen)throw new Error("Search Library isn't open yet!");if(e&&e.constructor!=Array&&(e=[e]),null==t.sort&&(t.sort=!1),null==t.rankMode&&(t.rankMode="mixmean"),null==e||0==e.length)return this.searchIndex.map(e=>Object.assign(Object.create(e),{distance:0}));let i;if("function"==typeof t.rankMode)i=t.rankMode;else if("function"!=typeof(i={mixmean:e=>e.reduce((e,t)=>e+t)*((result.terms.length+e.length)/2),mean:e=>e.reduce((e,t)=>e+t)/result.terms.length,min:e=>Math.min(...e),max:e=>Math.max(...e),add:e=>e.reduce((e,t)=>e+t)}[t.rankMode]))throw new Error(`rankMode ${t.rankMode} is unknown`);let r=this.searchIndex.map(t=>{let r=Object.create(t),s=e.map(e=>{let i=t.terms.map(t=>{if(typeof t!=typeof e)return 10;if(t.constructor==Array||t.constructor==Uint8Array)return n.distanceSquared(t,e);if(t.constructor!=String)throw new Error("entity term type unknown");return t==e?0:t.toLowerCase()==e.toLowerCase()?.25:void 0});return Math.min(...i)});return r.distance=i(s),r.parentSearchResult=t,r});return t.sort?r.sort((e,t)=>e.distance-t.distance):r}getBasePath(e){let t=`${e.id.substr(0,2)}/${e.id}`;return void 0!==this.settings.buildID&&(t=`${this.settings.buildID}/${t}`),`${this.baseURL}/defs/${t}`}async _fetchDefinitionData(e){let t=parseInt(s.bytesToPrefixBits(e._hash,this.settings.shardBits),2),i=await this._fetch(`${this.baseURL}/defs/${this.settings.buildID}/${t}.json`);return JSON.parse(s.decodeUTF8(i))[s.bytesToBase16(e._hash)][e._definitionIndex]}_hashWeb(e){return crypto.subtle.digest({sha1:"SHA-1",sha256:"SHA-256",sha384:"SHA-384",sha512:"SHA-512"}[this.settings.hashFunction],e)}async _hashNodeJS(e){let t=i({}).createHash(this.settings.hashFunction);return t.write(e),t.digest().buffer}async _fetchWeb(e,t=!0){let i=await fetch(encodeURI(e),{mode:"same-origin",credentials:"omit",cache:t?"no-cache":"default"});if(!i.ok)throw new Error(`Server responded with error code! "${i.status}" while loading "${e}" Search Library`);return await i.arrayBuffer()}async _fetchNodeJS(e){let t=i({});return(await t.readFile(e)).buffer}_bufferEqual(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.byteLength;i++)if(e[i]!=t[i])return!1;return!0}_bufferToBase16(e){return Array.from(new Uint8Array(e)).map(e=>`0${e.toString("16")}`.substr(-2)).join("").toLowerCase()}toString(){return`<SearchLibraryReader ${this.name}>`}}}).call(this,i({})),l=l.exports;var c={exports:{}};(function(e){c.exports=class{constructor(){this.settings={},this.opened=!1,this.binaryByteLookup=new Array(256);for(let e=0;e<256;e++)this.binaryByteLookup[e]=("0".repeat(8)+e.toString(2)).slice(-8);this.fetch=this._fetchWeb,this.hash=this._hashWeb,"object"==typeof e&&"object"==typeof e.versions&&void 0!==e.versions.node&&(this.fetch=this._fetchNodeJS,this.hash=this._hashNodeJS)}async open(e){this.name=e.split("/").slice(-1)[0],this.baseURL=e,this.paths={config:`${this.baseURL}/config.json`,data:`${this.baseURL}/data`};let t=await this.fetch(this.paths.config),i=new TextDecoder;return this.settings=JSON.parse(i.decode(t)),this.opened=!0,this}decodeTLV(e){let t=new DataView(e,0,3),i=t.getInt8(0),r=t.getUint16(1,!1);return{typeNum:i,data:e.slice(3,3+r),tail:e.slice(3+r)}}decodeNumbers(e){let t=2**(this.settings.vectorBits-1)-1,i=[...new Uint8Array(e)].map(e=>this.binaryByteLookup[e]).join(""),r=new Array(this.settings.vectorSize);for(let s=0;s<this.settings.vectorSize;s++){let e=i.slice(s*this.settings.vectorBits,(s+1)*this.settings.vectorBits),n="1"==e.slice(0,1),a=parseInt(e.slice(1),2)/t;r[s]=n?-a:+a}return r}decodeVector(e){let t=new DataView(e);new Array(this.settings.vectorSize).fill(0);let i=t.getUint8(0)/4;return this.decodeNumbers(e.slice(1,1+Math.ceil(this.settings.vectorSize*this.settings.vectorBits/8))).map(e=>e*i)}bitsString(e,t){let i=Math.ceil(t/8),r=[...new Uint8Array(e.slice(0,i))].map(e=>this.binaryByteLookup[e]).join("").slice(0,t);return parseInt(r,2)}async lookup(e){if(!this.opened)throw new Error("Vector Library Reader hasn't been opened yet, cannot lookup without configuration data");let t=new TextDecoder;e.constructor!=String&&(e=e.toString());let i=await this.hash(this.settings.caseInsensitive?e.toLowerCase():e),r=`${`${this.paths.data}/${this.bitsString(i,this.settings.prefixBits)}`}/${this.bitsString(i,this.settings.shardBits)}.bin`,s={},n={},a=await this.fetch(r),o=null;for(;a.byteLength>0;){let{typeNum:e,data:i,tail:r}=this.decodeTLV(a);0==e?o=t.decode(i):1==e?(s[o]=i,n[o.toLowerCase()]||(n[o.toLowerCase()]=i)):console.info(`Vector library received unknown packet type ${e}`),a=r}return s[e]?this.decodeVector(s[e]):this.settings.caseInsensitive&&n[e.toLowerCase()]?this.decodeVector(n[e]):null}_hashWeb(e){let t=(new TextEncoder).encode(e);return crypto.subtle.digest({sha1:"SHA-1",sha256:"SHA-256",sha384:"SHA-384",sha512:"SHA-512"}[this.settings.hashFunction],t)}async _hashNodeJS(e){let t=i({}).createHash(this.settings.hashFunction);return t.write(e),t.digest().buffer}async _fetchWeb(e){let t=await fetch(e,{redirect:"follow",mode:"same-origin",credentials:"omit",referrer:"omit",cache:"default"});if(!t.ok)throw new Error(`Server responded with error code! "${t.status}" while loading "${e}" Search Library`);return await t.arrayBuffer()}async _fetchNodeJS(e){let t=i({});return(await t.readFile(e)).buffer}}}).call(this,i({})),c=c.exports;var h={};class u{constructor(e){this.rawTokens=e.trim().split(/[\t\n,?!;:\[\]\(\){} "\u201d\u201c]+/).filter(e=>e.toString().trim().length>0),this.tokens=this.rawTokens.map(e=>{if(e.match(/^-#([a-zA-Z0-9._-]+)$/))return new d(e.slice(2),!1);if(e.match(/^#([a-zA-Z0-9._-]+)$/))return new d(e.slice(1),!0);{let t=e.trim().replace(/\u2018/g,"'");return(t.match(/[a-z]/)||t.length<2)&&(t=t.toLowerCase()),new f(t)}})}async vectorize(e){return this.tokens=await Promise.all(this.tokens.map(async t=>{if(t.constructor==f){let i=await e.lookup(t);return i?new m(t,i):t}return t})),this}get keywords(){return this.tokens.filter(e=>e.constructor==f||e.constructor==m)}get hashtags(){return this.tokens.filter(e=>e.constructor==d)}toString(){return this.tokens.join(" ")}}class d{constructor(e,t=!0){this.text=e.toString(),this.positive=!!t}toString(){return`${this.positive?"#":"-#"}${this.text}`}}class f{constructor(e){this.text=e.toString()}toString(){return this.text}toQuery(){return this.text}}class m{constructor(e,t){this.text=e.toString(),this.vector=t}toString(){return this.text}toQuery(){return this.vector}}u.HashtagToken=d,u.KeywordToken=f,u.WordVector=m,h=u;function g(e,t){if(!e)throw new Error(t||"AssertionError")}g.notEqual=function(e,t,i){},g.notOk=function(e,t){},g.equal=function(e,t,i){},g.ok=g;var p=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],y=p.length;function b(e,t,i){e[i]!==t[i]&&(t[i]=e[i],e[i]?t.setAttribute(i,""):t.removeAttribute(i))}var v=function(e,t){var i=e.nodeType,r=e.nodeName;1===i&&function(e,t){for(var i=t.attributes,r=e.attributes,s=null,n=null,a=null,o=null,l=r.length-1;l>=0;--l)a=(o=r[l]).name,s=o.namespaceURI,n=o.value,s?(a=o.localName||a,t.getAttributeNS(s,a)!==n&&t.setAttributeNS(s,a,n)):t.hasAttribute(a)?t.getAttribute(a)!==n&&("null"===n||"undefined"===n?t.removeAttribute(a):t.setAttribute(a,n)):t.setAttribute(a,n);for(var c=i.length-1;c>=0;--c)!1!==(o=i[c]).specified&&(a=o.name,(s=o.namespaceURI)?(a=o.localName||a,e.hasAttributeNS(s,a)||t.removeAttributeNS(s,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==i&&8!==i||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var i=e.value,r=t.value;b(e,t,"checked"),b(e,t,"disabled"),i!==r&&(t.setAttribute("value",i),t.value=i),"null"===i&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=i):t.removeAttribute("value")}(e,t):"OPTION"===r?function(e,t){b(e,t,"selected")}(e,t):"TEXTAREA"===r&&function(e,t){var i=e.value;if(i!==t.value&&(t.value=i),t.firstChild&&t.firstChild.nodeValue!==i){if(""===i&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=i}}(e,t),function(e,t){for(var i=0;i<y;i++){var r=p[i];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)},w=3;function A(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||x(e)!==x(t)?e:(v(e,t),k(e,t),t):null:e}function x(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function k(e,t){for(var i,r,s,n,a=0,o=0;i=t.childNodes[o],r=e.childNodes[o-a],i||r;o++)if(r)if(i)if(S(r,i))(s=A(r,i))!==i&&(t.replaceChild(s,i),a++);else{n=null;for(var l=o;l<t.childNodes.length;l++)if(S(t.childNodes[l],r)){n=t.childNodes[l];break}n?((s=A(r,n))!==n&&a++,t.insertBefore(s,i)):r.id||i.id?(t.insertBefore(r,i),a++):(s=A(r,i))!==i&&(t.replaceChild(s,i),a++)}else t.appendChild(r),a++;else t.removeChild(i),o--}function S(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===w&&e.nodeValue===t.nodeValue}var L=function(e,t,i){return i&&i.childrenOnly?(k(t,e),e):A(t,e)},_={},N=/(-?\d*\.?\d+(?:e[-+]?\d+)?)\s*([a-z\u03bc]*)/gi;function T(e){var t=0;return(e=e.replace(/(\d),(\d)/g,"$1$2")).replace(N,function(e,i,r){r=T[r]||T[r.toLowerCase().replace(/s$/,"")]||1,t+=parseFloat(i,10)*r}),t}_=T,T.nanosecond=T.ns=1e-6,T["\u03bcs"]=T.microsecond=.001,T.millisecond=T.ms=1,T.second=T.sec=T.s=1e3*T.ms,T.minute=T.min=T.m=60*T.s,T.hour=T.hr=T.h=60*T.m,T.day=T.d=24*T.h,T.week=T.wk=T.w=7*T.d,T.b=T.month=30.4375*T.d,T.year=T.yr=T.y=365.25*T.d;var I={};const E=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},U=({clearTimeout:e,setTimeout:t,willResolve:i})=>(r,{value:s,signal:n}={})=>{if(n&&n.aborted)return Promise.reject(E());let a,o,l;const c=e||clearTimeout,h=()=>{c(a),l(E())},u=()=>{n&&n.removeEventListener("abort",h)},d=new Promise((e,n)=>{o=(()=>{u(),i?e(s):n(s)}),l=n,a=(t||setTimeout)(o,r)});return n&&n.addEventListener("abort",h,{once:!0}),d.clear=(()=>{c(a),a=null,u(),o()}),d},$=U({willResolve:!0});$.reject=U({willResolve:!1}),$.createWithTimers=(({clearTimeout:e,setTimeout:t})=>{const i=U({clearTimeout:e,setTimeout:t,willResolve:!0});return i.reject=U({clearTimeout:e,setTimeout:t,willResolve:!1}),i}),(I=$).default=$;const C=(...e)=>document.querySelector(...e),H=(...e)=>document.querySelectorAll(...e);let P=window.ui=new class{constructor(e){this.config=e,this.searchEngine=new class{constructor(e){this.ready=!1,this.readyHandlers=[],this.config=e}async load(){try{[this.searchLibrary,this.vectorLibrary]=await Promise.all([(new l).open(this.config.searchLibraryPath),(new c).open(this.config.vectorLibraryPath)])}catch(e){throw this.readyHandlers.forEach(([t,i])=>i(e)),this.readyHandlers=[],e}this.ready=!0,this.readyHandlers.forEach(([e,t])=>e(this)),this.readyHandlers=[]}awaitReady(){return this.ready?Promise.resolve(this):new Promise((e,t)=>{this.readyHandlers.push([e,t])})}async query(e){await this.awaitReady();let t=new h(e);await t.vectorize(this.vectorLibrary);let i=await this.searchLibrary.lookup(t.keywords.map(e=>e.toQuery()),{sort:!1,rankMode:"add"}),r=t.hashtags.filter(e=>e.positive).map(e=>e.text),s=t.hashtags.filter(e=>!e.positive).map(e=>e.text);return(i=i.filter(e=>r.every(t=>e.tags.includes(t))&&!s.some(t=>e.tags.includes(t)))).forEach(e=>{e.distance+=e.termDiversity/500}),i.sort((e,t)=>e.distance-t.distance)}async getTags(){return await this.awaitReady(),this.searchLibrary.getTags()}}(e)}async load(){await this.searchEngine.load()}awaitReady(){return this.searchEngine.awaitReady()}async addHooks(){window.onhashchange=(()=>this.onHashChange(location.hash.replace(/^#/,""))),C(this.config.searchForm).onsubmit=(e=>{let t=C(this.config.searchInput).value;e.preventDefault(),location.href=`#${encodeURIComponent(t)}/0`}),""!=location.hash&&"#"!=location.hash&&this.onHashChange(location.hash.replace(/^#/,""))}onHashChange(e){""==e?this.renderHome(e):this.renderSearch(e)}renderHome(e){location.hash="#",C("html > body").className="home",C(this.config.resultsContainer).innerHTML="",C(this.config.paginationContainer).innerHTML="",C(this.config.searchInput).value="",C(this.config.searchInput).focus()}async renderSearch(e){let[i,r]=e.split("/").map(e=>decodeURIComponent(e));if(C(this.config.searchInput).value=i,this.searchEngine.ready?this.ariaNotice("Loading\u2026","off").focus():this.visualNotice("Loading\u2026"),this.results=await this.searchEngine.query(i),0==this.results.length)return this.visualNotice("No search results found.","live");C("html > body").className="results",C(this.config.resultsContainer).innerHTML="",C(this.config.paginationContainer).innerHTML="",this.displayResults=this.results.slice(parseInt(r),parseInt(r)+this.config.resultsPerPage);let s=Promise.all(this.displayResults.map(async(e,i)=>{await I(i*this.config.tileAppendDelay);let r=new class{constructor(e={}){this.config=e,this.config.mediaIndex=this.config.mediaIndex||0,this.result=null}setData(e){this.result=e,this.config.onChange&&this.config.onChange(this)}toHTML(){return this.result?this.toPopulatedHTML():this.toPlaceholderHTML()}getWarnings(){let e=this.config.warnings||{};return Object.keys(e).filter(e=>this.result.tags.includes(e)).map(e=>this.config.warnings[e])}toID(...e){return this.result?["result",this.result.id,...e].join("-"):""}toMediaViewer(){let e=(e,t)=>(e.preventDefault(),e.stopPropagation(),this.config.mediaIndex+=t,this.config.onChange(this),!1),i=this.config.mediaIndex>0,r=this.config.mediaIndex<this.result.media.length-1,s=this.result.media[this.config.mediaIndex];return function(){var e=t({}),i=document.createElement("div");i.setAttribute("class","video_player");var r=document.createElement("picture");r.setAttribute("aria-hidden","true"),r.setAttribute("data-nanomorph-component-id",arguments[1]+"/media/"+arguments[2]),r.setAttribute("class","video_thumb");var s=document.createElement("video");s.setAttribute("muted","muted"),s.setAttribute("preload","preload"),s.setAttribute("autoplay","autoplay"),s.setAttribute("loop","loop"),s.setAttribute("playsinline","playsinline"),s.setAttribute("class","video_thumb"),e(s,["\n          ",arguments[0],"\n        "]),e(r,["\n        ",arguments[3],"\n        ",s,"\n      "]);var n=document.createElement("button");n.setAttribute("aria-label","Previous Video"),n.onclick=arguments[4],n.setAttribute("style",arguments[5]),n.setAttribute("class","prev_vid"),e(n,[arguments[6]]);var a=document.createElement("button");return a.setAttribute("aria-label","Next Video"),a.onclick=arguments[7],a.setAttribute("style",arguments[8]),a.setAttribute("class","next_vid"),e(a,[arguments[9]]),e(i,["\n      ",r,"\n      ",n,"\n      ",a,"\n    "]),i}(s.map(e=>(function(){var e=document.createElement("source");return e.setAttribute("src",arguments[0]),e.setAttribute("type",arguments[1]),e})(e.url,e.type)),this.result.id,this.config.mediaIndex,s.map(e=>(function(){var e=document.createElement("source");return e.setAttribute("srcset",arguments[0]),e.setAttribute("type",arguments[1]),e})(e.url,e.type)),t=>e(t,-1),i?"":"display: none","<",t=>e(t,1),r?"":"display: none",">")}toPopulatedHTML(){return function(){var e=t({}),i=document.createElement("a");i.setAttribute("href",arguments[5]),i.setAttribute("referrerpolicy","origin"),i.setAttribute("rel","external"),i.setAttribute("id",arguments[6]),i.setAttribute("aria-labelledby",arguments[7]),i.setAttribute("role","link"),i.setAttribute("class","result");var r=document.createElement("h2");r.setAttribute("id",arguments[0]),r.setAttribute("class","keywords"),e(r,[arguments[1]]);var s=document.createElement("cite");s.setAttribute("class","link"),e(s,[arguments[2]]);var n=document.createElement("div");n.setAttribute("class","tags"),e(n,[arguments[3]]);var a=document.createElement("div");return a.setAttribute("class","mini_def"),e(a,[arguments[4]]),e(i,["\n      ",arguments[8],"\n      ",r,"\n      ",s,"\n      ",n,"\n      ",arguments[9],"\n      ",a,"\n    "]),i}(this.toID("keywords"),this.result.title||this.result.keywords.join(", "),this.result.link,this.result.tags.map(e=>`#${e}`).join(" "),this.result.body,this.result.link,this.toID(),this.toID("keywords"),this.toMediaViewer(),this.getWarnings().map(e=>(function(){var e=t({}),i=document.createElement("div");return i.setAttribute("class","alert "+arguments[0]),e(i,[arguments[1]]),i})(e.type,e.text)))}toPlaceholderHTML(){return(e=document.createElement("a")).setAttribute("aria-hidden","true"),e.setAttribute("class","result placeholder"),e;var e}}({warnings:this.config.warnings,onChange:()=>L(s,r.toHTML())}),s=r.toHTML();C(this.config.resultsContainer).append(s),r.setData(await e.fetch())}));await s;let n=new class{constructor(e){this.length=e.length||1,this.selected=e.selected||0,this.getURL=e.getURL||(e=>`?page=${e}`)}timesMap(e,t){if(e<=0)return[];let i=[];for(let r=0;r<e;r++)i.push(t(r));return i}toHTML(){return function(){var e=t({}),i=document.createElement("div");return i.setAttribute("id","pagination"),e(i,["\n      ",arguments[0],"\n    "]),i}(this.timesMap(this.length,e=>(function(){var e=t({}),i=document.createElement("a");return i.setAttribute("href",arguments[0]),i.setAttribute("aria-label","Page "+arguments[1]),i.setAttribute("aria-current",arguments[2]),e(i,[arguments[3]]),i})(this.getURL(e),e+1,this.selected==e?"page":"",e+1)))}}({length:Math.min(this.results.length/this.config.resultsPerPage,this.config.maxPages),selected:Math.floor(parseInt(r)/this.config.resultsPerPage),getURL:e=>`#${encodeURIComponent(i)}/${e*this.config.resultsPerPage}`});L(C(this.config.paginationContainer),n.toHTML()),this.ariaNotice("Search results updated.","off").focus()}visualNotice(e,i="polite"){C("html > body").className="notice";let r=C(this.config.resultsContainer);r.innerHTML="",r.append(function(){var e=t({}),i=document.createElement("div");return i.setAttribute("aria-live",arguments[0]),i.setAttribute("class","notice_box"),e(i,[arguments[1]]),i}(i,e))}ariaNotice(e,i="polite"){[...H("div.aria_notice")].forEach(e=>e.remove());let r=function(){var e=t({}),i=document.createElement("div");return i.setAttribute("tabindex","-1"),i.setAttribute("aria-live",arguments[0]),i.setAttribute("style","position: absolute; top: -1000px"),i.setAttribute("class","aria_notice"),e(i,[arguments[1]]),i}(i,e);return C(this.config.resultsContainer).before(r),r}async renderHashtagList(e){await this.awaitReady();let i=C(e),r=await this.searchEngine.getTags();i.innerHTML="";for(let s of Object.keys(r).sort((e,t)=>r[t]-r[e]))i.append(function(){var e=t({}),i=document.createElement("li"),r=document.createElement("a");return r.setAttribute("href",arguments[0]),e(r,["#",arguments[1]]),e(i,[r," (",arguments[2],")"]),i}(`./#${encodeURIComponent(`#${s}`)}/0`,s,r[s]))}}({languageName:"Auslan",searchLibraryPath:"datasets/search-index",vectorLibraryPath:"datasets/vectors-cc-en-300-8bit",resultsPerPage:10,maxPages:8,homeButton:"#header",searchForm:"#search_form",searchInput:"#search_box",resultsContainer:"#results",paginationContainer:"#pagination",tileAppendDelay:_(getComputedStyle(document.documentElement).getPropertyValue("--fade-time-offset").trim()),warnings:{invented:{type:"invented",text:"Informal, colloqual sign. Professionals should not use."}}});"true"==document.body.dataset.hook&&P.addHooks(),P.load(),document.body.dataset.hashtagList&&P.renderHashtagList(document.body.dataset.hashtagList)}();